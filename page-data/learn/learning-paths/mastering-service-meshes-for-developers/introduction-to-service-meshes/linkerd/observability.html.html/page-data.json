{"componentChunkName":"component---src-templates-learn-chapter-js-content-file-path-home-runner-work-layer-5-layer-5-content-learn-mastering-service-meshes-for-developers-introduction-to-service-meshes-linkerd-observability-mdx","path":"/learn/learning-paths/mastering-service-meshes-for-developers/introduction-to-service-meshes/linkerd/observability.html.html","result":{"data":{"chapter":{"body":"\n\nimport Tracing from \"../../../../src/assets/images/learn-layer5/linkerd/emojivoto-tracing.webp\";\nimport JaegerUI from \"../../../../src/assets/images/learn-layer5/linkerd/linkerd-jaeger-ui.webp\";\n\n<ChapterStyle>\n\n<h2 className=\"chapter-sub-heading\">Linkerd Telemetry and Distributed Tracing</h2>\n\n<br />\n\n<h3 className=\"chapter-sub-heading\">Linkerd Telemetry</h3>\n\nLinkerd's telemetry and monitoring features function automatically, without requiring any work on the part of the developer.\n\nWe have already looked at Linkerd Telemetry, not by name but by concept. Using stat, top and tap is one of the major and characteristic feature which Linkerd offers out of the box. All of this metrics are also accessible through Grafana Dashboard which Linkerd provides.\n\nExpose Grafana dashboard:\n\n```sh\nlinkerd dashboard &\n```\n\n- Start `linkerd dashboard` &amp; navigate over the service you would want to see Grafana Dashboard for.\n- In the last column, click of the `Grafana Icon` to access the metrics dashboard for the following deployment.\n\n<h3 className=\"chapter-sub-heading\">Distributed tracing with Linkerd</h3>\n\nLinkerd added support for Distributed Tracing, which means that if your application has enabled tracing based on B3 Propagation, Linkerd proxies would automatically recognize that (as the trace-id is propagated through http headers) and send their spans, provided that the proxies are configured regarding the meshed trace collector endpoint.\n\nTo enable tracing onto your cluster :\n\n```sh\ncat >> config.yaml << EOF\ntracing:\n  enabled: true\nEOF\n```\n\nThis configuration file can also be used to apply Add-On configuration (not just specific to tracing Add-On).\n\nLet us apply that configuration to the linkerd upgrade command using the --addon-config flag and pipe that output to kubectl apply.\n\n```sh\nlinkerd upgrade --addon-config config.yaml | kubectl apply -f -\n```\n\nBefore moving onto the next step, make sure everything is up and running with kubectl:\n\n```sh\nkubectl -n linkerd rollout status deploy/linkerd-collector\nkubectl -n linkerd rollout status deploy/linkerd-jaeger\n```\n\n<h4 className=\"chapter-sub-heading\">Configure your sample application</h4>\n\nApply the tracing configuration to the `emojivoto application`:\n\n```sh\nkubectl -n emojivoto patch -f https://run.linkerd.io/emojivoto.yml -p '\nspec:\n  template:\n    metadata:\n      annotations:\n        config.linkerd.io/trace-collector: linkerd-collector.linkerd:55678\n        config.alpha.linkerd.io/trace-collector-service-account: linkerd-collector\n'\n```\n\nBefore moving onto the next step, make sure everything is up and running with kubectl:\n\n```sh\nkubectl -n emojivoto rollout status deploy/web\n```\n\nThe above command enables tracing in the linkerd proxies but the application containers still donâ€™t have it enabled. Tracing can be enabled in the sample application can be enabled by\n\nTo enable tracing in emojivoto, run:\n\n```sh\n kubectl -n emojivoto set env --all deploy OC_AGENT_HOST=linkerd-collector.linkerd:55678\n```\n\n<h3 className=\"chapter-sub-heading\">Explore Jaeger</h3>\n\nNow, you can port-forward the `linkerd-jaeger` service to checkout the traces.\n\n```sh\nkubectl -n linkerd port-forward svc/linkerd-jaeger 16686:16686\n```\n\nNow let's explore traces of the `vote-bot` endpoint:\n\n<a href={Tracing}>\n  <img src={Tracing} width=\"100%\" align=\"center\" />\n</a>\n\nSo, As you can see there are spans of the linkerd-proxy. For each request between two meshed components, you can see there are four linkerd-proxy spans.\n\nThe first two spans would be the spans sent from the proxy of the client component and will be marked as outbound. Again, in these two spans, the first one is the span of the application -> proxy, and the second one is the proxy->otherside. They are differentiated by the server and client tags respectively.\n\n<br />\n\n<h3 className=\"chapter-sub-heading\"> Jaeger and Linkerd</h3>\n<br />\nIn Linkerd, as told above Grafana Integration is present in the `linkerd-web` ui\nthrough which which you can directly jump onto the dashboards of any workload\nlike deployment, pod, etc.\n\nLinkerd has done similar thing with Jaeger, if you have `tracing` enabled, if you navigate the Linkerd Dashboard, you should see a Jaeger icon on the right.\n\n<a href={JaegerUI}>\n  <img src={JaegerUI} width=\"100%\" align=\"center\" />\n</a>\n\n<h3 className=\"chapter-sub-heading\">Cleanup the tracing components</h3>\n\n```sh\nkubectl delete ns tracing emojivoto\n```\n\n</ChapterStyle>\n","frontmatter":{"chapterTitle":"Observability","description":"Meshery is the cloud native management plane which offers lifecycle, configuration, and performance management of service meshes and their workloads."},"fields":{"slug":"learn/learning-paths/mastering-service-meshes-for-developers/introduction-to-service-meshes/linkerd/observability","course":"introduction-to-service-meshes","learnpath":"mastering-service-meshes-for-developers","chapter":"observability"}},"course":{"nodes":[{"frontmatter":{"courseTitle":"Introduction to Service Meshes - Hands On","meshesYouLearn":[{"imagepath":{"childImageSharp":null,"extension":"svg","publicURL":"/static/731763d720780a49c2ffdfede8c28f4b/istio.svg"},"name":"Istio"},{"imagepath":{"childImageSharp":null,"extension":"svg","publicURL":"/static/b4f4020971de42f6fb2497075a67f325/linkerd.svg"},"name":"Linkerd"}]},"fields":{"slug":"learn/learning-paths/mastering-service-meshes-for-developers/introduction-to-service-meshes"}}]},"TOC":{"nodes":[{"frontmatter":{"order":8,"chapterTitle":"Circuit Breaking"},"fields":{"section":"istio","chapter":"circuit-breaking"}},{"frontmatter":{"order":9,"chapterTitle":"Conclusion"},"fields":{"section":"istio","chapter":"conclusion"}},{"frontmatter":{"order":2,"chapterTitle":"Deploy a sample application"},"fields":{"section":"istio","chapter":"deploy-an-application"}},{"frontmatter":{"order":3,"chapterTitle":"Exposing services through Istio Ingress Gateway"},"fields":{"section":"istio","chapter":"expose-services"}},{"frontmatter":{"order":6,"chapterTitle":"Fault Injection"},"fields":{"section":"istio","chapter":"fault-injection"}},{"frontmatter":{"order":1,"chapterTitle":"Getting Started"},"fields":{"section":"istio","chapter":"getting-started"}},{"frontmatter":{"order":7,"chapterTitle":"Mutual TLS & Identity Verification"},"fields":{"section":"istio","chapter":"mutual-tls"}},{"frontmatter":{"order":4,"chapterTitle":"Observability"},"fields":{"section":"istio","chapter":"observability"}},{"frontmatter":{"order":5,"chapterTitle":"Request Routing and Canary Testing"},"fields":{"section":"istio","chapter":"routing-and-canary"}},{"frontmatter":{"order":9,"chapterTitle":"Conclusion"},"fields":{"section":"linkerd","chapter":"conclusion"}},{"frontmatter":{"order":4,"chapterTitle":"Linkerd Dashboard"},"fields":{"section":"linkerd","chapter":"dashboard"}},{"frontmatter":{"order":5,"chapterTitle":"Debugging (Optional)"},"fields":{"section":"linkerd","chapter":"debugging"}},{"frontmatter":{"order":2,"chapterTitle":"Deploy a sample application"},"fields":{"section":"linkerd","chapter":"deploy-an-application"}},{"frontmatter":{"order":3,"chapterTitle":"Exposing services through Linkerd Ingress"},"fields":{"section":"linkerd","chapter":"expose-services"}},{"frontmatter":{"order":8,"chapterTitle":"Fault Injection"},"fields":{"section":"linkerd","chapter":"fault-injection"}},{"frontmatter":{"order":1,"chapterTitle":"Getting Started"},"fields":{"section":"linkerd","chapter":"getting-started"}},{"frontmatter":{"order":6,"chapterTitle":"Observability"},"fields":{"section":"linkerd","chapter":"observability"}},{"frontmatter":{"order":7,"chapterTitle":"Traffic Splitting using SMI and Linkerd"},"fields":{"section":"linkerd","chapter":"traffic-splitting"}}]},"serviceMeshesList":{"nodes":[{"fields":{"section":"istio"}},{"fields":{"section":"istio"}},{"fields":{"section":"istio"}},{"fields":{"section":"istio"}},{"fields":{"section":"istio"}},{"fields":{"section":"istio"}},{"fields":{"section":"istio"}},{"fields":{"section":"istio"}},{"fields":{"section":"istio"}},{"fields":{"section":"linkerd"}},{"fields":{"section":"linkerd"}},{"fields":{"section":"linkerd"}},{"fields":{"section":"linkerd"}},{"fields":{"section":"linkerd"}},{"fields":{"section":"linkerd"}},{"fields":{"section":"linkerd"}},{"fields":{"section":"linkerd"}},{"fields":{"section":"linkerd"}}]}},"pageContext":{"learnpath":"mastering-service-meshes-for-developers","slug":"learn/learning-paths/mastering-service-meshes-for-developers/introduction-to-service-meshes/linkerd/observability","course":"introduction-to-service-meshes","section":"linkerd","chapter":"observability","pageType":"chapter","frontmatter":{"docType":"Chapter","chapterTitle":"Observability","description":"Meshery is the cloud native management plane which offers lifecycle, configuration, and performance management of service meshes and their workloads.","videos":4,"lectures":12,"order":6}}},"staticQueryHashes":["1376321266","1485533831","2848499768","4047814605","961506260"],"matchPath":"/learn/learning-paths/mastering-service-meshes-for-developers/introduction-to-service-meshes/linkerd/observability.html"}