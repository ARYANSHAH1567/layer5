"use strict";(self.webpackChunkLayer5=self.webpackChunkLayer5||[]).push([[24369],{77468:function(e,n,t){t.r(n),t.d(n,{Head:function(){return f},default:function(){return d}});var l=t(39626),r=t(67294),o=t(85313).default.div.withConfig({displayName:"BufProtocolstyle__BufProtocol",componentId:"sc-1djgx4k-0"})(["\n    \n\n    div.fact {\n        color: ",";\n        font-style: italic;\n        font-size: 1.3rem;\n        font-weight: 600;\n        text-align: right;\n        border-right: 4px solid ",";        \n        padding-left: 2rem;\n        padding-right: 2rem;\n        padding-top: 1rem;\n        padding-bottom: 1rem;\n    }\n\n    div.fact-left {\n        display: flex;\n        flex-direction: column;\n        justify-content: flex-start;\n        color: ",";\n        font-style: italic;\n        font-size: 1.3rem;\n        font-weight: 600;\n        text-align: left;\n        border-left: 4px solid ",";\n        padding-left: 2rem;\n        padding-right: 2rem;\n        padding-top: 1rem;\n        padding-bottom: 1rem;\n    }\n    div.fact-center {\n        display: flex;\n        flex-direction: column;\n        justify-content: flex-start;\n        color: ",";\n        font-style: italic;\n        font-size: 1.3rem;\n        font-weight: 600;\n        text-align: center;\n        border-left: 4px solid ",";\n        border-right: 4px solid ",";\n        padding-left: 2rem;\n        padding-right: 2rem;\n        padding-top: 1rem;\n        padding-bottom: 1rem;\n    }\n    .problem-image {\n        display: inline;\n        float: right;\n        max-width:200px;\n        width:80%; \n        padding: 1.25rem;\n    }\n\n    var mediaQuery = window.matchMedia('(min-width: 768px)');\n    if(mediaQuery.matches) {\n        .problem-image {\n            display: flex !important;\n            margin: auto !important;\n            float: none;\n        }\n    }\n    \n    div.note {\n        margin: 1rem;\n        padding: 2rem;\n        display: flex;\n        border: 1px solid ",";\n        img {\n            margin-right: 3rem;\n        }\n    }\n    .centered-text {\n        padding-top: 2rem;\n        padding-bottom: 2rem;\n        font-size: 1.2rem;\n        font-weight: 600;\n    }\n"],(function(e){return e.theme.secondaryColor}),(function(e){return e.theme.secondaryColor}),(function(e){return e.theme.secondaryColor}),(function(e){return e.theme.secondaryColor}),(function(e){return e.theme.secondaryColor}),(function(e){return e.theme.secondaryColor}),(function(e){return e.theme.secondaryColor}),(function(e){return e.theme.primaryLightColor})),a=t.p+"static/problems-62c5c968a68599c09ff86cce5661f493.webp";function i(e){var n=Object.assign({h2:"h2",ul:"ul",li:"li",code:"code",a:"a",p:"p",strong:"strong"},(0,l.ah)(),e.components),t=n.BlogWrapper;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("BlogWrapper",!0),r.createElement(t,null,r.createElement(o,null,r.createElement("div",{className:"intro",style:{textAlign:"center",margin:"2rem 4rem"}},r.createElement("p",null,"At Layer5, we are continuously evaluating new technologies and incorporating them into our open source projects. Buf is one of those projects. This post presents an overview of Buf.")),r.createElement(n.h2,null,"What is Buf?"),r.createElement("p",null,"A tool to make Protobuf reliable and easy to use for service owners and clients, while keeping it the obvious choice on the technical merits.\nOur organization should not have to reinvent the wheel to create, maintain, and consume Protobuf APIs efficiently and effectively. It will handle our Protobuf management strategy for us, so we can focus on what matters."),r.createElement("div",{className:"fact"},"Learn more about Buf Protocol, visit ",r.createElement("a",{href:"https://buf.build",rel:"nofollow"},"Buf Protocol")," or their documentation at ",r.createElement("a",{href:"https://docs.buf.build/",rel:"nofollow"},"Buf Protocol Docs")),r.createElement("img",{className:"problem-image",src:a}),r.createElement(n.h2,null,"Features"),r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"Automatic file discovery."),"\n",r.createElement(n.li,null,"Selectable configuration - 40 lint checkers and 54 breaking checkers"),"\n",r.createElement(n.li,null,"Selectable error output - ",r.createElement(n.code,null,"file:line:col:message")),"\n",r.createElement(n.li,null,"Check anything from anywhere - proto files, tar, git, pre-built images or file descriptors."),"\n",r.createElement(n.li,null,r.createElement(n.a,{href:"https://docs.buf.build/tour-8/"},"Speed")," - Its internal compiler is super fast (approx. 4x then Protoc)"),"\n",r.createElement(n.li,null,"Can use buf as a protoc plugin instead of using it as a standalone tool."),"\n"),r.createElement(n.h2,null,"Buf CLI"),r.createElement(n.p,null,"Buf attempts to simplify your Protocol Buffers workflow using the Buf CLI and protoc plugins. The Buf CLI currently provides:"),r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"A linter that enforces good API design choices and structure."),"\n",r.createElement(n.li,null,"A breaking change detector that enforces compatibility at the source code level or wire level."),"\n",r.createElement(n.li,null,"A generator that invokes your protoc plugins based on a configurable template. A protoc replacement that uses Buf's newly-developed high performance Protobuf compiler."),"\n",r.createElement(n.li,null,"A configurable file builder that produces Images, our extension of FileDescriptorSets."),"\n"),r.createElement(n.h2,null,"Comparison Between Protobuf and Buf"),r.createElement(n.p,null,"Layer5 projects currently use protoc as the tool for building their protobuf defintions. The following are some considerations made while determining whether to use Buf."),r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"Protobuf is not as widely adopted as JSON."),"\n",r.createElement(n.li,null,"API Structure","\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"No standards enforcement"),"\n",r.createElement(n.li,null,"Inconsistency can arise across an organization's Protobuf APIs,"),"\n",r.createElement(n.li,null,"Design decisions can be made that can affect your API's future iterability."),"\n"),"\n"),"\n",r.createElement(n.li,null,"Backward Compatibility"),"\n",r.createElement(n.li,null,"Stub distribution"),"\n",r.createElement(n.li,null,"Tooling"),"\n"),r.createElement("p",null,"Buf aims to solve the above problems and it's long-term goal is to enable schema-driven development: A future where APIs are defined consistently, in a way that service owners and us can depend on"),r.createElement(n.h2,null,"Roadmap to Adopting Buf"),r.createElement(n.p,null,"In consideration of the use of Buf, we would adopt it in phases, starting with the following ares of integration."),r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"\n",r.createElement(n.p,null,r.createElement(n.strong,null,"API Structure  Enforcements")),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"Linter solves this issue by enforcing standards."),"\n",r.createElement(n.li,null,"Also, we donâ€™t need to use Buf as a standalone tool we can just use linter as plugins."),"\n"),"\n"),"\n",r.createElement(n.li,null,"\n",r.createElement(n.p,null,r.createElement(n.strong,null,"Backward Compatibility")),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"It will check for different things that can cause breaking change."),"\n",r.createElement(n.li,null,"For example, type change."),"\n"),"\n"),"\n"),r.createElement("div",{className:"intro"},r.createElement("p",null,"If these topics excite you and you want to explore more ",r.createElement("a",{href:"/resources"},"cloud native technolgies"),', come and say "Hi" on the community ',r.createElement("a",{href:"http://slack.layer5.io"},"Slack")," and you are sure to be warmly welcomed. ",r.createElement("span",null,"ðŸ˜€")))))}var c=function(e){void 0===e&&(e={});var n=Object.assign({},(0,l.ah)(),e.components).wrapper;return n?r.createElement(n,e,r.createElement(i,e)):i(e)};var u=t(17875),s=t(85235),m=function(e){var n=e.data,t=e.children;return r.createElement(r.Fragment,null,r.createElement(s.Z,{data:n},t))};function d(e){return r.createElement(m,e,r.createElement(c,e))}var f=function(e){var n=e.data;return r.createElement(u.Z,{title:n.mdx.frontmatter.title,image:n.mdx.frontmatter.thumbnail.publicURL})}}}]);